---
- name: Machine setup
  hosts: localhost
  connection: local

  tasks:

    - name: Set Gnome to dark mode.
      dconf:
        key: "/org/gnome/desktop/interface/color-scheme"
        value: "'prefer-dark'"

    - name: Set Gnome background image.
      dconf:
        key: "/org/gnome/desktop/background/picture-uri-dark"
        value: "'file:///usr/share/backgrounds/gnome/blobs-d.svg'"

    - name: Add Flathub as Flatpak remote
      flatpak_remote:
        name: flathub
        flatpakrepo_url: "https://dl.flathub.org/repo/flathub.flatpakrepo"

    # Gear Lever - Manage AppImages with ease.
    # @see https://flathub.org/apps/it.mijorus.gearlever
    - name: Install Gear Lever
      flatpak:
        name: "it.mijorus.gearlever"
        remote: flathub
